<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的記帳本 - 週曆版</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts: Noto Sans TC -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #EFEBE9; /* 淺灰褐背景 */
        }
        
        /* 隱藏捲軸 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* 自定義顏色 */
        .bg-primary-dark { background-color: #4E342E; }
        .bg-primary-light { background-color: #8D6E63; }
        .text-primary-dark { color: #3E2723; }
        .bg-accent-pink { background-color: #D7CCC8; }
        .bg-accent-income { background-color: #C8E6C9; }

        /* 點選日期的動畫 */
        .date-card {
            transition: all 0.2s ease;
        }
        .date-card.active {
            background-color: white;
            color: #4E342E;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <!-- 手機容器 -->
    <div class="relative w-full max-w-md h-[100vh] bg-[#F5F5F5] shadow-2xl overflow-hidden flex flex-col">
        
        <!-- Header 區域 -->
        <!-- 增加高度以容納週曆 (h-48 -> h-64) -->
        <header class="bg-primary-dark h-64 px-6 pt-8 pb-6 flex flex-col justify-between shrink-0 relative z-0 transition-all duration-300">
            
            <!-- 上半部：標題與登入 -->
            <div class="flex justify-between items-start w-full">
                <!-- 左側：年份與月份 -->
                <div class="text-white">
                    <p class="text-xs opacity-80 mb-1" id="current-year-display">2026年</p>
                    <div class="flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity">
                        <h1 class="text-3xl font-bold tracking-wide" id="current-month-display">1月</h1>
                        <i class="fa-solid fa-chevron-down text-sm opacity-70 mt-1"></i>
                    </div>
                </div>

                <!-- 右側：登入按鈕 -->
                <button class="flex items-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/30 text-white text-xs px-3 py-1.5 rounded-full transition-all">
                    <i class="fa-regular fa-user"></i>
                    <span>帳號登入</span>
                </button>
            </div>

            <!-- 下半部：週曆 (動態生成) -->
            <div class="w-full mt-4">
                <!-- 這裡是用 JS 動態生成的日期 -->
                <div class="flex justify-between items-center" id="calendar-strip">
                    <!-- Javascript 會將日期卡片插入這裡 -->
                </div>
            </div>

        </header>

        <!-- 主要內容區 (白色卡片) -->
        <main class="flex-1 bg-white -mt-8 rounded-t-[30px] relative z-10 flex flex-col shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.3)] overflow-hidden">
            
            <!-- 裝飾用拉條 -->
            <div class="w-full flex justify-center pt-3 pb-1 cursor-grab active:cursor-grabbing">
                <div class="w-12 h-1.5 bg-gray-200 rounded-full"></div>
            </div>

            <!-- 交易列表 -->
            <div class="flex-1 overflow-y-auto no-scrollbar px-6 pt-2 pb-24" id="transaction-list">
                
                <!-- 標題：今天 (範例新增) -->
                <div class="text-xs font-bold text-gray-400 mt-2 mb-3 ml-1">今天</div>

                <!-- 範例 0: 早餐 (新增的，為了展示今天有點點) -->
                <div class="flex items-center justify-between group cursor-pointer border-b-[1.5px] border-[#8A7878]/20 pb-4 mb-4" data-date="2026-01-04">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-[#8D6E63] rounded-xl flex items-center justify-center text-white shadow-sm group-hover:scale-105 transition-transform">
                            <i class="fa-solid fa-mug-hot text-xl"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-primary-dark font-bold text-lg">早餐</span>
                            <span class="text-gray-400 text-xs">路易莎咖啡</span>
                        </div>
                    </div>
                    <div class="flex flex-col items-end gap-1">
                        <span class="bg-[#D7CCC8] text-[#3E2723] px-3 py-0.5 rounded-full font-bold text-sm min-w-[80px] text-center">
                            - $120
                        </span>
                        <span class="text-gray-400 text-xs tracking-wider">今日 09:30</span>
                    </div>
                </div>

                <div class="text-xs font-bold text-gray-400 mt-2 mb-3 ml-1">稍早</div>

                <!-- 範例 1: 服飾 -->
                <div class="flex items-center justify-between group cursor-pointer border-b-[1.5px] border-[#8A7878]/20 pb-4 mb-4" data-date="2026-01-03">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-[#8D6E63] rounded-xl flex items-center justify-center text-white shadow-sm group-hover:scale-105 transition-transform">
                            <i class="fa-solid fa-shirt text-xl"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-primary-dark font-bold text-lg">服飾</span>
                            <span class="text-gray-400 text-xs">Uniqlo 冬季外套</span>
                        </div>
                    </div>
                    <div class="flex flex-col items-end gap-1">
                        <span class="bg-[#D7CCC8] text-[#3E2723] px-3 py-0.5 rounded-full font-bold text-sm min-w-[80px] text-center">
                            - $3,400
                        </span>
                        <span class="text-gray-400 text-xs tracking-wider">2026/01/03</span>
                    </div>
                </div>

                <!-- 範例 2: 娛樂 -->
                <div class="flex items-center justify-between group cursor-pointer border-b-[1.5px] border-[#8A7878]/20 pb-4 mb-4" data-date="2026-01-02">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-[#8D6E63] rounded-xl flex items-center justify-center text-white shadow-sm group-hover:scale-105 transition-transform">
                            <i class="fa-solid fa-gamepad text-xl"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-primary-dark font-bold text-lg">娛樂</span>
                            <span class="text-gray-400 text-xs">Steam 冬季特賣</span>
                        </div>
                    </div>
                    <div class="flex flex-col items-end gap-1">
                        <span class="bg-[#D7CCC8] text-[#3E2723] px-3 py-0.5 rounded-full font-bold text-sm min-w-[80px] text-center">
                            - $6,000
                        </span>
                        <span class="text-gray-400 text-xs tracking-wider">2026/01/02</span>
                    </div>
                </div>

                 <!-- 範例 3: 水電費 -->
                 <div class="flex items-center justify-between group cursor-pointer border-b-[1.5px] border-[#8A7878]/20 pb-4 mb-4" data-date="2026-01-01">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-[#8D6E63] rounded-xl flex items-center justify-center text-white shadow-sm group-hover:scale-105 transition-transform">
                            <i class="fa-solid fa-bolt text-xl"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-primary-dark font-bold text-lg">水電費</span>
                            <span class="text-gray-400 text-xs">12月份電費帳單</span>
                        </div>
                    </div>
                    <div class="flex flex-col items-end gap-1">
                        <span class="bg-[#D7CCC8] text-[#3E2723] px-3 py-0.5 rounded-full font-bold text-sm min-w-[80px] text-center">
                            - $1,200
                        </span>
                        <span class="text-gray-400 text-xs tracking-wider">2026/01/01</span>
                    </div>
                </div>

                 <!-- 範例 4: 薪資收入 -->
                 <div class="flex items-center justify-between group cursor-pointer pb-4" data-date="2026-01-01">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-[#5D4037] rounded-xl flex items-center justify-center text-white shadow-sm group-hover:scale-105 transition-transform">
                            <i class="fa-solid fa-wallet text-xl"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-primary-dark font-bold text-lg">薪資</span>
                            <span class="text-gray-400 text-xs">一月份薪水入帳</span>
                        </div>
                    </div>
                    <div class="flex flex-col items-end gap-1">
                        <span class="bg-[#C8E6C9] text-[#1B5E20] px-3 py-0.5 rounded-full font-bold text-sm min-w-[80px] text-center">
                            + $50,000
                        </span>
                        <span class="text-gray-400 text-xs tracking-wider">2026/01/01</span>
                    </div>
                </div>

            </div>

            <!-- 底部統計欄 -->
            <div class="absolute bottom-0 left-0 w-full bg-[#B86A6A]/80 backdrop-blur-md shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] border-t border-white/20 pb-8 pt-4 px-8 z-20">
                <div class="flex justify-between items-center">
                    <div class="flex flex-col">
                        <span class="text-xs text-white/80 font-medium mb-1">本月支出總計</span>
                        <span class="text-2xl font-bold text-white tracking-tight">
                            $ <span id="total-expense">10,720</span>
                        </span>
                    </div>
                    <div class="w-[1px] h-10 bg-white/30"></div>
                    <div class="flex flex-col items-end">
                        <span class="text-xs text-white/80 font-medium mb-1">本月收入總計</span>
                        <span class="text-2xl font-bold text-white tracking-tight">
                            $ <span id="total-income">50,000</span>
                        </span>
                    </div>
                </div>
            </div>

            <!-- 浮動新增按鈕 -->
            <button onclick="showToast()" class="absolute bottom-28 right-6 w-14 h-14 bg-[#4E342E] rounded-full text-white shadow-lg flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-30">
                <i class="fa-solid fa-plus text-2xl"></i>
            </button>

        </main>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm opacity-0 transition-opacity duration-300 pointer-events-none z-50">
        功能開發中...
    </div>

    <script>
        // --- 1. 初始化設定 ---
        const today = new Date(); // 預設使用系統今天
        // 為了模擬您的範例情境，我們也可以強制設定今天為 2026/01/04
        // const today = new Date('2026-01-04'); 
        
        // 模擬：哪些日期有記帳資料 (格式 YYYY-MM-DD)
        // 這裡對應到下方 HTML 中的 data-date 屬性，或實際資料庫
        const transactionDates = new Set([
            '2026-01-01', 
            '2026-01-02', 
            '2026-01-03',
            // 假設今天(模擬的當天)也有記帳
            new Date().toISOString().split('T')[0] 
        ]);

        function initCalendar() {
            const container = document.getElementById('calendar-strip');
            const currentYearDisplay = document.getElementById('current-year-display');
            const currentMonthDisplay = document.getElementById('current-month-display');
            const weekDays = ['週日', '週一', '週二', '週三', '週四', '週五', '週六'];

            // 更新 Header 的年月顯示
            currentYearDisplay.textContent = `${today.getFullYear()}年`;
            currentMonthDisplay.textContent = `${today.getMonth() + 1}月`;

            // 清空容器
            container.innerHTML = '';

            // 生成未來 7 天 (包含今天)
            for (let i = 0; i < 7; i++) {
                // 算出日期
                const date = new Date(today);
                date.setDate(today.getDate() + i);

                const dayNum = date.getDate();
                const dayName = weekDays[date.getDay()];
                
                // 格式化 YYYY-MM-DD 用來比對是否有資料
                const dateString = date.toISOString().split('T')[0];
                const hasData = transactionDates.has(dateString);

                // 判斷是否為「被選中的日期」(預設選中第一天/今天)
                const isSelected = (i === 0);

                // 建立 HTML 元素
                const el = document.createElement('div');
                // Tailwind class
                // date-card: 自定義類別用來做動畫
                // active: 選中狀態
                el.className = `
                    date-card flex flex-col items-center justify-center 
                    w-12 h-16 rounded-2xl cursor-pointer 
                    ${isSelected ? 'active bg-white text-[#4E342E] shadow-sm' : 'text-white/70 hover:bg-white/10'}
                `;
                
                // 點擊事件
                el.onclick = () => selectDate(el);

                // 內部 HTML 結構
                el.innerHTML = `
                    <span class="text-[10px] font-medium mb-0.5">${dayName}</span>
                    <span class="text-xl font-bold leading-none">${dayNum}</span>
                    <!-- 圓點：如果有資料才顯示 -->
                    <div class="mt-1 w-1.5 h-1.5 rounded-full ${hasData ? (isSelected ? 'bg-[#4E342E]' : 'bg-white') : 'bg-transparent'}"></div>
                `;

                container.appendChild(el);
            }
        }

        // --- 2. 點擊日期切換樣式 ---
        function selectDate(element) {
            // 移除所有 active 樣式
            document.querySelectorAll('.date-card').forEach(el => {
                el.classList.remove('active', 'bg-white', 'text-[#4E342E]', 'shadow-sm');
                el.classList.add('text-white/70');
                
                // 重置圓點顏色 (變成白色)
                const dot = el.querySelector('div:last-child');
                if (dot && dot.classList.contains('bg-[#4E342E]')) {
                    dot.classList.remove('bg-[#4E342E]');
                    dot.classList.add('bg-white');
                }
            });

            // 為被點擊的元素加上樣式
            element.classList.remove('text-white/70');
            element.classList.add('active', 'bg-white', 'text-[#4E342E]', 'shadow-sm');

            // 改變被選中項目的圓點顏色 (變成深色，比較明顯)
            const dot = element.querySelector('div:last-child');
            // 只有當圓點原本是顯示的(bg-white)才變色，如果是透明(bg-transparent)就不變
            if (dot && dot.classList.contains('bg-white')) {
                dot.classList.remove('bg-white');
                dot.classList.add('bg-[#4E342E]');
            }
        }

        // --- 3. 工具函式 ---
        function formatMoney(amount) {
            return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.remove('opacity-0');
            setTimeout(() => {
                toast.classList.add('opacity-0');
            }, 2000);
        }

        document.querySelectorAll('#transaction-list > div').forEach(item => {
            item.addEventListener('click', () => {
                item.style.backgroundColor = '#F5F5F5';
                setTimeout(() => {
                    item.style.backgroundColor = 'transparent';
                }, 200);
            });
        });

        // 啟動
        initCalendar();

    </script>
</body>
</html>
